/* =========================================================
   Stag Lore — Desk + Book (Phase 1)
   - ONLY: book sitting on desk with ember glow on hover
   - No open-book mode yet
   - Paths are lowercase (GitHub Pages is case-sensitive)
   ========================================================= */

:root{
  --text: rgba(231,226,219,.92);

  /* Scene tuning */
  --sceneMax: 1200px;

  /* Book placement (tweak these 3 if needed) */
  --bookLeft: 23%;
  --bookTop: 63%;
  --bookWidth: min(460px, 48vw);

  /* “Sitting” illusion */
  --tiltX: 12deg;     /* tips toward desk */
  --tiltZ: -7deg;     /* slight rotation */
  --lift: 0px;        /* keep 0 to avoid hovering */

  /* Glow */
  --glowA: rgba(255, 168, 64, .22);
  --glowB: rgba(255, 120, 40, .12);
  --ember: rgba(255, 160, 70, .75);
  --ember2: rgba(255, 210, 160, .35);

  /* Vignette strength */
  --v1: .08;
  --v2: .58;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background:#050608;
  color:var(--text);
  overflow:hidden;
  font-family: ui-serif, Georgia, "Times New Roman", serif;
}

/* =========================
   BACKGROUND (fixed)
   ========================= */
.bg{
  position:fixed;
  inset:0;
  z-index:-5;
  background: url("./assets/desk-bg.png") center / cover no-repeat;
  transform: translateZ(0);
}

/* Atmos overlay (dust / vignette) */
.atmos{
  position:fixed;
  inset:0;
  z-index:-4;
  pointer-events:none;
  background:
    radial-gradient(120% 90% at 50% 10%, rgba(255,255,255,var(--v1)), transparent 60%),
    radial-gradient(120% 120% at 50% 45%, transparent 55%, rgba(0,0,0,var(--v2)) 100%),
    linear-gradient(180deg, rgba(0,0,0,.20), rgba(0,0,0,.26));
  mix-blend-mode: normal;
}

/* =========================
   STAGE LAYOUT
   ========================= */
.stage{
  position:relative;
  height:100%;
  width:100%;
}

.desk-scene{
  position:relative;
  height:100%;
  width:min(var(--sceneMax), 100%);
  margin:0 auto;
}

/* =========================
   BOOK ANCHOR
   ========================= */
.book-anchor{
  position:absolute;
  left:var(--bookLeft);
  top:var(--bookTop);
  transform: translate(-50%, -50%);
  width: var(--bookWidth);
  aspect-ratio: 4 / 3; /* anchor box */
  padding:0;
  border:0;
  background:transparent;
  cursor:pointer;

  /* HARD LOCK layering so book can’t disappear */
  z-index:10;

  /* keep it stable */
  user-select:none;
  -webkit-tap-highlight-color: transparent;
}

/* Book image */
.book{
  position:absolute;
  left:50%;
  top:50%;
  width: 100%;
  height:auto;
  transform:
    translate(-50%, -50%)
    perspective(900px)
    rotateX(var(--tiltX))
    rotateZ(var(--tiltZ))
    translateY(var(--lift));
  transform-origin: 50% 60%;
  display:block;

  /* Make it sit “in” the scene */
  filter:
    drop-shadow(0 18px 26px rgba(0,0,0,.50));

  /* no accidental dragging */
  pointer-events:none;
}

/* Ambient shadow (broad, soft) */
.shadow-ambient{
  position:absolute;
  left:50%;
  top:58%;
  width: 82%;
  height: 28%;
  transform: translate(-50%, -50%) rotateZ(var(--tiltZ));
  border-radius: 50%;
  background: radial-gradient(circle at 50% 50%,
    rgba(0,0,0,.32),
    rgba(0,0,0,0) 70%
  );
  filter: blur(10px);
  opacity: .65;
  z-index:9;
  pointer-events:none;
}

/* Contact shadow (tight) — THIS kills “hovering” */
.shadow-contact{
  position:absolute;
  left:50%;
  top:62%;
  width: 74%;
  height: 18%;
  transform: translate(-50%, -50%) rotateZ(var(--tiltZ));
  border-radius: 50%;
  background: radial-gradient(circle at 50% 55%,
    rgba(0,0,0,.45),
    rgba(0,0,0,0) 65%
  );
  filter: blur(6px);
  opacity: .92;
  z-index:9;
  pointer-events:none;
}

/* Embers canvas sits above book */
.embers{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  z-index:12;
  pointer-events:none;
  opacity:0;
  transition: opacity .22s ease;
}

/* Optional hint text */
.book-hint{
  position:absolute;
  left:50%;
  top:92%;
  transform: translate(-50%, -50%);
  font-size: 12px;
  letter-spacing: .28em;
  opacity:.42;
  text-transform:uppercase;
  z-index:12;
  pointer-events:none;
}

/* Hover / focus: intentional “ritual wake” */
.book-anchor:hover .embers,
.book-anchor:focus-visible .embers{
  opacity:1;
}

.book-anchor:hover .book,
.book-anchor:focus-visible .book{
  filter:
    drop-shadow(0 18px 26px rgba(0,0,0,.52))
    drop-shadow(0 0 22px var(--glowA))
    drop-shadow(0 0 46px var(--glowB));
}

.book-anchor:hover .shadow-contact,
.book-anchor:focus-visible .shadow-contact{
  opacity: .98; /* slightly stronger so it still feels grounded */
}

.book-anchor:focus-visible{
  outline: 2px solid rgba(255, 190, 120, .22);
  outline-offset: 8px;
  border-radius: 18px;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .embers{ transition:none; }
  .book-anchor:hover .book{ filter: drop-shadow(0 18px 26px rgba(0,0,0,.52)); }
}

/* Small screens: nudge placement */
@media (max-width: 760px){
  :root{
    --bookLeft: 36%;
    --bookTop: 66%;
    --bookWidth: min(420px, 78vw);
    --tiltX: 10deg;
    --tiltZ: -6deg;
  }
  body{ overflow:hidden; }
}